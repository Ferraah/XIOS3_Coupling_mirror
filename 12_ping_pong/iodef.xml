<?xml version="1.0" ?>
<simulation>
    <context id="ocn">
        <calendar type="Gregorian" time_origin="2025-01-01" start_date="2025-01-01"/>
        <grid_definition>
            <grid id="grid_2D_ocn">
                <domain id="domain_ocn">
                    <generate_rectilinear_domain/>
                </domain>
            </grid>
            <grid id="grid_2D_atm">
                <domain id="domain_atm"/>
            </grid>
        </grid_definition>
        <variable_definition>
            <variable id="toymodel_timestep_duration">1s</variable>
            <variable id="toymodel_duration">8s</variable>
            <variable id="toymodel_ni_glo">60</variable>
            <variable id="toymodel_nj_glo">1</variable>
            <variable id="toymodel_type">rectilinear</variable>
        </variable_definition>
        <field_definition>
            <field id="field2D_send_ocn" grid_ref="grid_2D_ocn" operation="instant" freq_op="1ts" freq_offset="0ts"/>
            <field id="field2D_recv_ocn" field_ref="atm_to_ocn" grid_ref="grid_2D_ocn"/>
        </field_definition>
        <coupler_out_definition>
            <coupler_out context="atm::atm">
                <field id="ocn_to_atm" field_ref="field2D_send_ocn" freq_op="1ts" expr="@this_ref"/>
            </coupler_out>
        </coupler_out_definition>
        <coupler_in_definition>
            <coupler_in context="atm::atm">
                <field id="atm_to_ocn" grid_ref="grid_2D_atm" freq_op="1ts" freq_offset="1ts" read_access="true"/>
            </coupler_in>
        </coupler_in_definition>
    </context>
    <context id="atm">
        <calendar type="Gregorian" time_origin="2025-01-01" start_date="2025-01-01"/>

        <grid_definition>
            <grid id="grid_2D_ocn">
                <domain id="domain_ocn"/>
            </grid>
            <grid id="grid_2D_atm">
                <domain id="domain_atm">
                    <generate_rectilinear_domain/>
                </domain>
            </grid>
        </grid_definition>

        <variable_definition>
            <variable id="toymodel_timestep_duration">1s</variable>
            <variable id="toymodel_duration">8s</variable>
            <variable id="toymodel_ni_glo">60</variable>
            <variable id="toymodel_nj_glo">1</variable>
            <variable id="toymodel_type">rectilinear</variable>
        </variable_definition>
        <field_definition>
            <field id="field2D_recv_atm" field_ref="ocn_to_atm" grid_ref="grid_2D_atm"/>
            <field id="field2D_send_atm" grid_ref="grid_2D_atm" operation="instant" freq_op="1ts" freq_offset="0ts"/>
        </field_definition>
        <coupler_out_definition>
            <coupler_out context="ocn::ocn">
                <field id="atm_to_ocn" field_ref="field2D_send_atm" freq_op="1ts" expr="@this_ref"/>
            </coupler_out>
        </coupler_out_definition>
        <coupler_in_definition>
            <coupler_in context="ocn::ocn">
                <field id="ocn_to_atm" grid_ref="grid_2D_ocn" freq_op="1ts" freq_offset="1ts" read_access="true"/>
            </coupler_in>
        </coupler_in_definition>

    </context>
    <context id="xios">
        <variable_definition>
            <variable_group id="parameters">
                <variable id="print_file" type="bool">true</variable>
                <variable id="transport_protocol" type="string">p2p</variable>
            </variable_group>
        </variable_definition>
    </context>
</simulation>

<?xml version="1.0" ?>
<simulation>
    <context id="atm">
        <calendar type="Gregorian" time_origin="2025-01-01" start_date="2025-01-01"/>
        <grid_definition>
            <grid id="grid_2D">
                <domain id="domain">
                    <generate_rectilinear_domain/>
                </domain>
            </grid>
        </grid_definition>
        <variable_definition>
            <variable id="toymodel_timestep_duration">1800s</variable>
            <variable id="toymodel_duration">14400s</variable>
            <variable id="toymodel_ni_glo">10</variable>
            <variable id="toymodel_nj_glo">10</variable>
            <variable id="toymodel_type">rectilinear</variable>
        </variable_definition>
        <field_definition>
            <field id="field2D_recv1" field_ref="ocn_to_atm1"/>
            <field id="field2D_send1" grid_ref="grid_2D" operation="average" freq_op="1ts" freq_offset="0ts"/>
            <field id="field2D_recv2" field_ref="ocn_to_atm2"/>
            <field id="field2D_send2" grid_ref="grid_2D" operation="average" freq_op="1ts" freq_offset="0ts"/>
        </field_definition>
        <coupler_out_definition>
            <coupler_out context="ocn::ocn">
                <field id="atm_to_ocn1" field_ref="field2D_send1" freq_op="1ts" expr="@this_ref"/>
                <field id="field2D_restart_for_ocn1" field_ref="field2D_restart_for_ocn1_read" freq_op="1y"/>
            </coupler_out>
            <coupler_out context="ocn::ocn">
                <field id="atm_to_ocn2" field_ref="field2D_send2" freq_op="1ts" expr="@this_ref"/>
                <field id="field2D_restart_for_ocn2" field_ref="field2D_restart_for_ocn2_read" freq_op="1y"/>
            </coupler_out>
        </coupler_out_definition>
        <coupler_in_definition>
            <coupler_in context="ocn::ocn">
                <field id="ocn_to_atm1" grid_ref="grid_2D" freq_op="2ts" freq_offset="3ts" read_access="true"/>
                <field id="field2D_restart_for_atm1" grid_ref="grid_2D" freq_op="1y" freq_offset="1ts" read_access="true"/>
            </coupler_in>
            <coupler_in context="ocn::ocn">
                <field id="ocn_to_atm2" grid_ref="grid_2D" freq_op="2ts" freq_offset="3ts" read_access="true"/>
                <field id="field2D_restart_for_atm2" grid_ref="grid_2D" freq_op="1y" freq_offset="1ts" read_access="true"/>
            </coupler_in>
        </coupler_in_definition>
        <file_definition>
            <file id="restart_zerofield_for_ocn1" name="restart_zerofield_for_ocn1" enabled="true" type="one_file" output_freq="1y" record_offset="0" mode="read">
                <field id="field2D_restart_for_ocn1_read" name="atm_to_ocn1" grid_ref="grid_2D" operation="instant" read_access="true"/>
            </file>
            <file id="restart_next_for_ocn1" name="restart_next_for_ocn1" output_freq="14400s" type="one_file" enabled="true" append="true">
                <field field_ref="atm_to_ocn1" name="atm_to_ocn1"/>
            </file>
            <file id="restart_zerofield_for_ocn2" name="restart_zerofield_for_ocn2" enabled="true" type="one_file" output_freq="1y" record_offset="0" mode="read">
                <field id="field2D_restart_for_ocn2_read" name="atm_to_ocn2" grid_ref="grid_2D" operation="instant" read_access="true"/>
            </file>
            <file id="restart_next_for_ocn2" name="restart_next_for_ocn2" output_freq="14400s" type="one_file" enabled="true" append="true">
                <field field_ref="atm_to_ocn2" name="atm_to_ocn2"/>
            </file>
        </file_definition>
    </context>
    <context id="ocn">
        <calendar type="Gregorian" time_origin="2025-01-01" start_date="2025-01-01"/>
        <grid_definition>
            <grid id="grid_2D">
                <domain id="domain">
                    <generate_rectilinear_domain/>
                </domain>
            </grid>
        </grid_definition>
        <variable_definition>
            <variable id="toymodel_timestep_duration">3600s</variable>
            <variable id="toymodel_duration">14400s</variable>
            <variable id="toymodel_ni_glo">10</variable>
            <variable id="toymodel_nj_glo">10</variable>
            <variable id="toymodel_type">rectilinear</variable>
        </variable_definition>
        <field_definition>
            <field id="field2D_send1" grid_ref="grid_2D" operation="average" freq_op="1ts" freq_offset="0ts"/>
            <field id="field2D_recv1" field_ref="atm_to_ocn1"/>
            <field id="field2D_send2" grid_ref="grid_2D" operation="average" freq_op="1ts" freq_offset="0ts"/>
            <field id="field2D_recv2" field_ref="atm_to_ocn2"/>
        </field_definition>
        <coupler_out_definition>
            <coupler_out context="atm::atm">
                <field id="ocn_to_atm1" field_ref="field2D_send1" freq_op="1ts" expr="@this_ref"/>
                <field id="field2D_restart_for_atm1" field_ref="field2D_restart_for_atm1_read" freq_op="1y"/>
            </coupler_out>
            <coupler_out context="atm::atm">
                <field id="ocn_to_atm2" field_ref="field2D_send2" freq_op="1ts" expr="@this_ref"/>
                <field id="field2D_restart_for_atm2" field_ref="field2D_restart_for_atm2_read" freq_op="1y"/>
            </coupler_out>
        </coupler_out_definition>
        <coupler_in_definition>
            <coupler_in context="atm::atm">
                <field id="atm_to_ocn1" grid_ref="grid_2D" freq_op="2ts" freq_offset="3ts" read_access="true"/>
                <field id="field2D_restart_for_ocn1" grid_ref="grid_2D" freq_op="1y" freq_offset="1ts" read_access="true"/>
            </coupler_in>
            <coupler_in context="atm::atm">
                <field id="atm_to_ocn2" grid_ref="grid_2D" freq_op="2ts" freq_offset="3ts" read_access="true"/>
                <field id="field2D_restart_for_ocn2" grid_ref="grid_2D" freq_op="1y" freq_offset="1ts" read_access="true"/>
            </coupler_in>
        </coupler_in_definition>
        <file_definition>
            <file id="restart_zerofield_for_atm1" name="restart_zerofield_for_atm1" enabled="true" type="one_file" output_freq="1y" record_offset="0" mode="read">
                <field id="field2D_restart_for_atm1_read" name="ocn_to_atm1" grid_ref="grid_2D" operation="instant" read_access="true"/>
            </file>
            <file id="restart_next_for_atm1" name="restart_next_for_atm1" output_freq="14400s" type="one_file" enabled="true" append="true">
                <field field_ref="ocn_to_atm1" name="ocn_to_atm1"/>
            </file>
            <file id="restart_zerofield_for_atm2" name="restart_zerofield_for_atm2" enabled="true" type="one_file" output_freq="1y" record_offset="0" mode="read">
                <field id="field2D_restart_for_atm2_read" name="ocn_to_atm2" grid_ref="grid_2D" operation="instant" read_access="true"/>
            </file>
            <file id="restart_next_for_atm2" name="restart_next_for_atm2" output_freq="14400s" type="one_file" enabled="true" append="true">
                <field field_ref="ocn_to_atm2" name="ocn_to_atm2"/>
            </file>
        </file_definition>
    </context>
    <context id="xios">
        <variable_definition>
            <variable_group id="parameters">
                <variable id="print_file" type="bool">true</variable>
                <variable id="transport_protocol" type="string">p2p</variable>
            </variable_group>
        </variable_definition>
    </context>
</simulation>
